<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Create spatio-temporal Folds Using Predefined Groups — ResamplingSptCVCstf • mlr3spatiotempcv</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/journal/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/all.min.css" integrity="sha256-PbSmjxuVAzJ6FPvNYsrXygfGhNJYyZ2GktDbkMBqQZg=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/v4-shims.min.css" integrity="sha256-A6jcAdwFD48VMjlI3GDxUd+eCQa7/KWy6G9oe/ovaPA=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<link href="../extra.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Create spatio-temporal Folds Using Predefined Groups — ResamplingSptCVCstf" />
<meta property="og:description" content="Implementation of CAST::CreateSpaceTimeFolds()." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a href="https://mlr-org.com"><img src="https://raw.githubusercontent.com/mlr-org/mlr3/master/man/figures/logo.png" id="hexlogo" alt="mlr-org" /></a>
        <a class="navbar-brand" href="../index.html">mlr3spatiotempcv <small>v0.0.0.9006</small></a>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="../reference/index.html">
    <span class="fa fa fa fa-file-alt"></span>
     
    Reference
  </a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<li>
  <a href="https://mlr3book.mlr-org.com">
    <span class="fa fa fa fa-link"></span>
     
    mlr3book
  </a>
</li>
<li>
  <a href="../articles/mlr3spatiotempcv.html">Get started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/spatiotemp-viz.html">Spatiotemporal Visualization</a>
    </li>
  </ul>
</li>
        <li>
  <a href="https://github.com/mlr-org/mlr3spatiotempcv/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://lmmisld-lmu-stats-slds.srv.mwn.de/mlr_invite/">
    <span class="fa fa fa fa-comments"></span>
     
  </a>
</li>
<li>
  <a href="https://stackoverflow.com/questions/tagged/mlr3">
    <span class="fab fa fab fa-stack-overflow"></span>
     
  </a>
</li>
<li>
  <a href="https://mlr-org.com/">
    <span class="fa fa-rss"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create spatio-temporal Folds Using Predefined Groups</h1>
    <small class="dont-index">Source: <a href='https://github.com/mlr-org/mlr3spatiotempcv/blob/master/R/ResamplingSptCVCstf.R'><code>R/ResamplingSptCVCstf.R</code></a></small>
    <div class="hidden name"><code>ResamplingSptCVCstf.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Implementation of <code>CAST::CreateSpaceTimeFolds()</code>.</p>
    </div>



    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Using "class" is helpful in the case that data are clustered in space
and are categorical. E.g This is the case for land cover classifications when
training data come as training polygons. In this case the data should be split in a way
that entire polygons are held back (spacevar="polygonID") but at the same time the distribution of classes
should be similar in each fold (class="LUC").</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Meyer H, Reudenbach C, Hengl T, Katurji M, Nauss T (2018).
&#8220;Improving performance of spatio-temporal machine learning models using forward feature selection and target-oriented validation.&#8221;
<em>Environmental Modelling \&amp; Software</em>, <b>101</b>, 1--9.
doi: <a href='https://doi.org/10.1016/j.envsoft.2017.12.001'>10.1016/j.envsoft.2017.12.001</a>
, <a href='https://doi.org/10.1016%2Fj.envsoft.2017.12.001'>https://doi.org/10.1016%2Fj.envsoft.2017.12.001</a>.</p>
    <h2 class="hasAnchor" id="super-class"><a class="anchor" href="#super-class"></a>Super class</h2>

    <p><code><a href='https://mlr3.mlr-org.com/reference/Resampling.html'>mlr3::Resampling</a></code> -&gt; <code>ResamplingSptCVCstf</code></p>
    <h2 class="hasAnchor" id="active-bindings"><a class="anchor" href="#active-bindings"></a>Active bindings</h2>

    <p><div class="r6-active-bindings"></p><dl'>
<dt><code>iters</code></dt><dd><p><code><a href='https://rdrr.io/r/base/integer.html'>integer(1)</a></code><br />
Returns the number of resampling iterations, depending on the
values stored in the <code>param_set</code>.</p></dd>

</dl><p></div></p>
    <h2 class="hasAnchor" id="methods"><a class="anchor" href="#methods"></a>Methods</h2>

    
<h3>Public methods</h3>

<ul>
<li><p><a href='#method-new'><code>ResamplingSptCVCstf$new()</code></a></p></li>
<li><p><a href='#method-instantiate'><code>ResamplingSptCVCstf$instantiate()</code></a></p></li>
<li><p><a href='#method-clone'><code>ResamplingSptCVCstf$clone()</code></a></p></li>
</ul>
<p><details open ><summary>Inherited methods</summary>
<ul>
<li><p><span class="pkg-link" data-pkg="mlr3" data-topic="Resampling" data-id="format"><a href='../../mlr3/html/Resampling.html#method-format'><code>mlr3::Resampling$format()</code></a></span></p></li>
<li><p><span class="pkg-link" data-pkg="mlr3" data-topic="Resampling" data-id="help"><a href='../../mlr3/html/Resampling.html#method-help'><code>mlr3::Resampling$help()</code></a></span></p></li>
<li><p><span class="pkg-link" data-pkg="mlr3" data-topic="Resampling" data-id="print"><a href='../../mlr3/html/Resampling.html#method-print'><code>mlr3::Resampling$print()</code></a></span></p></li>
<li><p><span class="pkg-link" data-pkg="mlr3" data-topic="Resampling" data-id="test_set"><a href='../../mlr3/html/Resampling.html#method-test_set'><code>mlr3::Resampling$test_set()</code></a></span></p></li>
<li><p><span class="pkg-link" data-pkg="mlr3" data-topic="Resampling" data-id="train_set"><a href='../../mlr3/html/Resampling.html#method-train_set'><code>mlr3::Resampling$train_set()</code></a></span></p></li>
</ul>
</details>

<hr>
<a id="method-new"></a></p><h3>Method <code>new()</code></h3>
<p>Create a "Spacetime Folds" resampling instance.</p><h3>Usage</h3>
<p><div class="r"></p><pre><span class='no'>ResamplingSptCVCstf</span>$<span class='fu'>new</span>(<span class='kw'>id</span> <span class='kw'>=</span> <span class='st'>"spcv-cstf"</span>)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl'>
<dt><code>id</code></dt><dd><p><code><a href='https://rdrr.io/r/base/character.html'>character(1)</a></code><br />
Identifier for the resampling strategy.</p></dd>

</dl><p></div></p>
<p><hr>
<a id="method-instantiate"></a></p><h3>Method <code>instantiate()</code></h3>
<p>Materializes fixed training and test splits for a given task.</p><h3>Usage</h3>
<p><div class="r"></p><pre><span class='no'>ResamplingSptCVCstf</span>$<span class='fu'>instantiate</span>(
  <span class='no'>task</span>,
  <span class='kw'>space_var</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>time_var</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>class</span> <span class='kw'>=</span> <span class='kw'>NULL</span>
)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl'>
<dt><code>task</code></dt><dd><p><a href='https://mlr3.mlr-org.com/reference/Task.html'>Task</a><br />
A task to instantiate.</p></dd>

<dt><code>space_var</code></dt><dd><p><code>[character]</code><br />
Column name identifying the spatial units.</p></dd>

<dt><code>time_var</code></dt><dd><p><code>[character]</code><br />
Column name identifying the temporal units.</p></dd>

<dt><code>class</code></dt><dd><p><code>[character]</code><br />
Column name identifying a class unit (e.g. land cover).</p></dd>

</dl><p></div></p>
<p><hr>
<a id="method-clone"></a></p><h3>Method <code>clone()</code></h3>
<p>The objects of this class are cloneable with this method.</p><h3>Usage</h3>
<p><div class="r"></p><pre><span class='no'>ResamplingSptCVCstf</span>$<span class='fu'>clone</span>(<span class='kw'>deep</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl'>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p></dd>

</dl><p></div></p>



    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>mlr3</span>)
<span class='no'>task</span> <span class='kw'>=</span> <span class='fu'><a href='https://mlr3.mlr-org.com/reference/mlr_sugar.html'>tsk</a></span>(<span class='st'>"cookfarm"</span>)

<span class='co'># Instantiate Resampling</span>
<span class='no'>rcv</span> <span class='kw'>=</span> <span class='fu'><a href='https://mlr3.mlr-org.com/reference/mlr_sugar.html'>rsmp</a></span>(<span class='st'>"spcv-cstf"</span>, <span class='kw'>folds</span> <span class='kw'>=</span> <span class='fl'>5</span>)
<span class='no'>rcv</span>$<span class='fu'>instantiate</span>(<span class='no'>task</span>, <span class='kw'>time_var</span> <span class='kw'>=</span> <span class='st'>"Date"</span>, <span class='kw'>space_var</span> <span class='kw'>=</span> <span class='st'>"SOURCEID"</span>)

<span class='co'># Individual sets:</span>
<span class='no'>rcv</span>$<span class='fu'>train_set</span>(<span class='fl'>1</span>)</div><div class='output co'>#&gt;  [1]  17  23  35  40  41  50  62  67  78  91  92  96 101 108 113 116 120 122 123
#&gt; [20] 126 128 131 139 142 151 154 157 170 178 181 193 204 205 212 213 218 230 233
#&gt; [39] 243 254 259 260 262 263 266 273 282 287 290 296 311 317 331 332 339 345 355
#&gt; [58] 358 359 370 371 374 375 378 393 396 406 412 413 417 419 423 441 446 458 461
#&gt; [77] 465 475 483 488 490 500</div><div class='input'><span class='no'>rcv</span>$<span class='fu'>test_set</span>(<span class='fl'>1</span>)</div><div class='output co'>#&gt;  [1]   4  14  22  24  38  42  86  89 165 180 220 245 280 285 307 342 349 362 380
#&gt; [20] 422 429 459 473</div><div class='input'><span class='co'># check that no obs are in both sets</span>
<span class='fu'><a href='https://rdrr.io/r/base/sets.html'>intersect</a></span>(<span class='no'>rcv</span>$<span class='fu'>train_set</span>(<span class='fl'>1</span>), <span class='no'>rcv</span>$<span class='fu'>test_set</span>(<span class='fl'>1</span>)) <span class='co'># good!</span></div><div class='output co'>#&gt; integer(0)</div><div class='input'>
<span class='co'># Internal storage:</span>
<span class='no'>rcv</span>$<span class='no'>instance</span> <span class='co'># table</span></div><div class='output co'>#&gt; $test
#&gt; $test[[1]]
#&gt;  [1]   4  14  22  24  38  42  86  89 165 180 220 245 280 285 307 342 349 362 380
#&gt; [20] 422 429 459 473
#&gt; 
#&gt; $test[[2]]
#&gt;  [1]   8  12  20  32  43  84 112 146 209 302 346 356 381 410 439 454 472 484
#&gt; 
#&gt; $test[[3]]
#&gt;  [1]  44  80 118 186 197 225 240 281 286 291 316 318 329 338 403 424 460 476 486
#&gt; [20] 495 496
#&gt; 
#&gt; $test[[4]]
#&gt;  [1]   3  11  15  29  72  87 107 109 140 174 183 228 235 253 255 284 369 383 385
#&gt; [20] 444 453 491
#&gt; 
#&gt; $test[[5]]
#&gt;  [1]  21  25  36  53  85  90 103 105 150 182 221 238 257 298 328 330 352 353 357
#&gt; [20] 384 411 415 418 430 487
#&gt; 
#&gt; 
#&gt; $train
#&gt; $train[[1]]
#&gt;  [1]  17  23  35  40  41  50  62  67  78  91  92  96 101 108 113 116 120 122 123
#&gt; [20] 126 128 131 139 142 151 154 157 170 178 181 193 204 205 212 213 218 230 233
#&gt; [39] 243 254 259 260 262 263 266 273 282 287 290 296 311 317 331 332 339 345 355
#&gt; [58] 358 359 370 371 374 375 378 393 396 406 412 413 417 419 423 441 446 458 461
#&gt; [77] 465 475 483 488 490 500
#&gt; 
#&gt; $train[[2]]
#&gt;  [1]   2   7  10  30  31  34  51  52  58  64  79  88  97  98 102 104 110 115 119
#&gt; [20] 124 153 158 161 162 169 175 191 192 194 195 196 200 210 211 215 226 229 231
#&gt; [39] 237 244 256 261 288 294 295 300 301 321 322 325 327 333 336 348 354 365 367
#&gt; [58] 373 382 386 392 416 420 425 426 438 450 451 455 463 464 468 482 489 497 499
#&gt; 
#&gt; $train[[3]]
#&gt;  [1]   5   9  16  19  26  27  37  46  47  48  49  68  71  74  77  82  93  99 111
#&gt; [20] 114 121 127 132 135 143 147 148 149 152 155 164 167 168 176 190 202 216 217
#&gt; [39] 239 241 246 252 264 267 270 274 276 278 279 297 306 310 313 320 323 335 341
#&gt; [58] 344 351 376 379 387 394 398 405 408 409 421 437 442 447 448 456 467 478 479
#&gt; [77] 492 494
#&gt; 
#&gt; $train[[4]]
#&gt;  [1]   1  13  18  39  45  54  56  60  63  66  69  70  73  76 106 125 133 134 138
#&gt; [20] 141 145 160 173 179 184 188 198 201 208 214 222 227 234 242 247 248 251 258
#&gt; [39] 271 275 292 293 305 308 309 319 324 334 337 340 361 364 372 377 391 397 400
#&gt; [58] 401 414 427 431 432 434 435 440 452 462 466 469 470 480 481 493 498
#&gt; 
#&gt; $train[[5]]
#&gt;  [1]   6  28  33  55  57  59  61  65  75  81  83  94  95 100 117 129 130 136 137
#&gt; [20] 144 156 159 163 166 171 172 177 185 187 189 199 203 206 207 219 223 224 232
#&gt; [39] 236 249 250 265 268 269 272 277 283 289 299 303 304 312 314 315 326 343 347
#&gt; [58] 350 360 363 366 368 388 389 390 395 399 402 404 407 428 433 436 443 445 449
#&gt; [77] 457 471 474 477 485
#&gt; 
#&gt; </div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://pat-s.me'>Patrick Schratz</a>, Marc Becker.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


