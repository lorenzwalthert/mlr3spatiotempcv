<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Create spatio-temporal Folds Using Predefined Groups — ResamplingSptCVCstf • mlr3spatiotempcv</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/journal/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/all.min.css" integrity="sha256-PbSmjxuVAzJ6FPvNYsrXygfGhNJYyZ2GktDbkMBqQZg=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/v4-shims.min.css" integrity="sha256-A6jcAdwFD48VMjlI3GDxUd+eCQa7/KWy6G9oe/ovaPA=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<link href="../extra.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Create spatio-temporal Folds Using Predefined Groups — ResamplingSptCVCstf" />
<meta property="og:description" content="Implementation of CAST::CreateSpaceTimeFolds()." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a href="https://mlr-org.com"><img src="https://raw.githubusercontent.com/mlr-org/mlr3/master/man/figures/logo.png" id="hexlogo" alt="mlr-org" /></a>
        <a class="navbar-brand" href="../index.html">mlr3spatiotempcv <small>v0.0.0.9006</small></a>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="../reference/index.html">
    <span class="fa fa fa fa-file-alt"></span>
     
    Reference
  </a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<li>
  <a href="https://mlr3book.mlr-org.com">
    <span class="fa fa fa fa-link"></span>
     
    mlr3book
  </a>
</li>
<li>
  <a href="../articles/mlr3spatiotempcv.html">Get started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/spatiotemp-viz.html">Spatiotemporal Visualization</a>
    </li>
  </ul>
</li>
        <li>
  <a href="https://github.com/mlr-org/mlr3spatiotempcv/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://lmmisld-lmu-stats-slds.srv.mwn.de/mlr_invite/">
    <span class="fa fa fa fa-comments"></span>
     
  </a>
</li>
<li>
  <a href="https://stackoverflow.com/questions/tagged/mlr3">
    <span class="fab fa fab fa-stack-overflow"></span>
     
  </a>
</li>
<li>
  <a href="https://mlr-org.com/">
    <span class="fa fa-rss"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create spatio-temporal Folds Using Predefined Groups</h1>
    <small class="dont-index">Source: <a href='https://github.com/mlr-org/mlr3spatiotempcv/blob/master/R/ResamplingSptCVCstf.R'><code>R/ResamplingSptCVCstf.R</code></a></small>
    <div class="hidden name"><code>ResamplingSptCVCstf.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Implementation of <code>CAST::CreateSpaceTimeFolds()</code>.</p>
    </div>



    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Using "class" is helpful in the case that data are clustered in space
and are categorical. E.g This is the case for land cover classifications when
training data come as training polygons. In this case the data should be split in a way
that entire polygons are held back (spacevar="polygonID") but at the same time the distribution of classes
should be similar in each fold (class="LUC").</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Meyer H, Reudenbach C, Hengl T, Katurji M, Nauss T (2018).
&#8220;Improving performance of spatio-temporal machine learning models using forward feature selection and target-oriented validation.&#8221;
<em>Environmental Modelling \&amp; Software</em>, <b>101</b>, 1--9.
doi: <a href='https://doi.org/10.1016/j.envsoft.2017.12.001'>10.1016/j.envsoft.2017.12.001</a>
, <a href='https://doi.org/10.1016%2Fj.envsoft.2017.12.001'>https://doi.org/10.1016%2Fj.envsoft.2017.12.001</a>.</p>
    <h2 class="hasAnchor" id="super-class"><a class="anchor" href="#super-class"></a>Super class</h2>

    <p><code><a href='https://mlr3.mlr-org.com/reference/Resampling.html'>mlr3::Resampling</a></code> -&gt; <code>ResamplingSptCVCstf</code></p>
    <h2 class="hasAnchor" id="active-bindings"><a class="anchor" href="#active-bindings"></a>Active bindings</h2>

    <p><div class="r6-active-bindings"></p><dl'>
<dt><code>iters</code></dt><dd><p><code><a href='https://rdrr.io/r/base/integer.html'>integer(1)</a></code><br />
Returns the number of resampling iterations, depending on the
values stored in the <code>param_set</code>.</p></dd>

</dl><p></div></p>
    <h2 class="hasAnchor" id="methods"><a class="anchor" href="#methods"></a>Methods</h2>

    
<h3>Public methods</h3>

<ul>
<li><p><a href='#method-new'><code>ResamplingSptCVCstf$new()</code></a></p></li>
<li><p><a href='#method-folds'><code>ResamplingSptCVCstf$folds()</code></a></p></li>
<li><p><a href='#method-repeats'><code>ResamplingSptCVCstf$repeats()</code></a></p></li>
<li><p><a href='#method-instantiate'><code>ResamplingSptCVCstf$instantiate()</code></a></p></li>
<li><p><a href='#method-clone'><code>ResamplingSptCVCstf$clone()</code></a></p></li>
</ul>
<p><details open ><summary>Inherited methods</summary>
<ul>
<li><p><span class="pkg-link" data-pkg="mlr3" data-topic="Resampling" data-id="format"><a href='../../mlr3/html/Resampling.html#method-format'><code>mlr3::Resampling$format()</code></a></span></p></li>
<li><p><span class="pkg-link" data-pkg="mlr3" data-topic="Resampling" data-id="help"><a href='../../mlr3/html/Resampling.html#method-help'><code>mlr3::Resampling$help()</code></a></span></p></li>
<li><p><span class="pkg-link" data-pkg="mlr3" data-topic="Resampling" data-id="print"><a href='../../mlr3/html/Resampling.html#method-print'><code>mlr3::Resampling$print()</code></a></span></p></li>
<li><p><span class="pkg-link" data-pkg="mlr3" data-topic="Resampling" data-id="test_set"><a href='../../mlr3/html/Resampling.html#method-test_set'><code>mlr3::Resampling$test_set()</code></a></span></p></li>
<li><p><span class="pkg-link" data-pkg="mlr3" data-topic="Resampling" data-id="train_set"><a href='../../mlr3/html/Resampling.html#method-train_set'><code>mlr3::Resampling$train_set()</code></a></span></p></li>
</ul>
</details>

<hr>
<a id="method-new"></a></p><h3>Method <code>new()</code></h3>
<p>Create a "Spacetime Folds" resampling instance.</p><h3>Usage</h3>
<p><div class="r"></p><pre><span class='no'>ResamplingSptCVCstf</span>$<span class='fu'>new</span>(<span class='kw'>id</span> <span class='kw'>=</span> <span class='st'>"sptcv-cstf"</span>)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl'>
<dt><code>id</code></dt><dd><p><code><a href='https://rdrr.io/r/base/character.html'>character(1)</a></code><br />
Identifier for the resampling strategy.</p></dd>

</dl><p></div></p>
<p><hr>
<a id="method-folds"></a></p><h3>Method <code>folds()</code></h3>
<p>Translates iteration numbers to fold number.</p><h3>Usage</h3>
<p><div class="r"></p><pre><span class='no'>ResamplingSptCVCstf</span>$<span class='fu'>folds</span>(<span class='no'>iters</span>)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl'>
<dt><code>iters</code></dt><dd><p><code><a href='https://rdrr.io/r/base/integer.html'>integer()</a></code><br />
Iteration number.</p></dd>

</dl><p></div></p>
<p><hr>
<a id="method-repeats"></a></p><h3>Method <code>repeats()</code></h3>
<p>Translates iteration numbers to repetition number.</p><h3>Usage</h3>
<p><div class="r"></p><pre><span class='no'>ResamplingSptCVCstf</span>$<span class='fu'>repeats</span>(<span class='no'>iters</span>)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl'>
<dt><code>iters</code></dt><dd><p><code><a href='https://rdrr.io/r/base/integer.html'>integer()</a></code><br />
Iteration number.</p></dd>

</dl><p></div></p>
<p><hr>
<a id="method-instantiate"></a></p><h3>Method <code>instantiate()</code></h3>
<p>Materializes fixed training and test splits for a given task.</p><h3>Usage</h3>
<p><div class="r"></p><pre><span class='no'>ResamplingSptCVCstf</span>$<span class='fu'>instantiate</span>(
  <span class='no'>task</span>,
  <span class='kw'>space_var</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>time_var</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>class</span> <span class='kw'>=</span> <span class='kw'>NULL</span>
)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl'>
<dt><code>task</code></dt><dd><p><a href='https://mlr3.mlr-org.com/reference/Task.html'>Task</a><br />
A task to instantiate.</p></dd>

<dt><code>space_var</code></dt><dd><p><code>[character]</code><br />
Column name identifying the spatial units.</p></dd>

<dt><code>time_var</code></dt><dd><p><code>[character]</code><br />
Column name identifying the temporal units.</p></dd>

<dt><code>class</code></dt><dd><p><code>[character]</code><br />
Column name identifying a class unit (e.g. land cover).</p></dd>

</dl><p></div></p>
<p><hr>
<a id="method-clone"></a></p><h3>Method <code>clone()</code></h3>
<p>The objects of this class are cloneable with this method.</p><h3>Usage</h3>
<p><div class="r"></p><pre><span class='no'>ResamplingSptCVCstf</span>$<span class='fu'>clone</span>(<span class='kw'>deep</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl'>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p></dd>

</dl><p></div></p>



    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>mlr3</span>)
<span class='no'>task</span> <span class='kw'>=</span> <span class='fu'><a href='https://mlr3.mlr-org.com/reference/mlr_sugar.html'>tsk</a></span>(<span class='st'>"cookfarm"</span>)

<span class='co'># Instantiate Resampling</span>
<span class='no'>rcv</span> <span class='kw'>=</span> <span class='fu'><a href='https://mlr3.mlr-org.com/reference/mlr_sugar.html'>rsmp</a></span>(<span class='st'>"sptcv-cstf"</span>, <span class='kw'>folds</span> <span class='kw'>=</span> <span class='fl'>5</span>)
<span class='no'>rcv</span>$<span class='fu'>instantiate</span>(<span class='no'>task</span>, <span class='kw'>time_var</span> <span class='kw'>=</span> <span class='st'>"Date"</span>, <span class='kw'>space_var</span> <span class='kw'>=</span> <span class='st'>"SOURCEID"</span>)

<span class='co'># Individual sets:</span>
<span class='no'>rcv</span>$<span class='fu'>train_set</span>(<span class='fl'>1</span>)</div><div class='output co'>#&gt;  [1]   7  12  23  27  42  47  50  67  71  74  86  93  98 110 125 135 136 141 155
#&gt; [20] 157 160 162 169 178 181 200 203 204 213 220 223 228 234 240 243 245 247 261
#&gt; [39] 262 265 267 275 277 279 285 286 317 328 329 332 335 340 346 351 353 360 365
#&gt; [58] 371 374 375 381 385 389 392 393 406 439 442 445 447 452 453 454 462 467 471
#&gt; [77] 480 482 483 493 497</div><div class='input'><span class='no'>rcv</span>$<span class='fu'>test_set</span>(<span class='fl'>1</span>)</div><div class='output co'>#&gt;  [1]   1  28  37  56  58  70 103 105 119 127 142 186 196 208 258 295 307 350 358
#&gt; [20] 378 411 473 485</div><div class='input'><span class='co'># check that no obs are in both sets</span>
<span class='fu'><a href='https://rdrr.io/r/base/sets.html'>intersect</a></span>(<span class='no'>rcv</span>$<span class='fu'>train_set</span>(<span class='fl'>1</span>), <span class='no'>rcv</span>$<span class='fu'>test_set</span>(<span class='fl'>1</span>)) <span class='co'># good!</span></div><div class='output co'>#&gt; integer(0)</div><div class='input'>
<span class='co'># Internal storage:</span>
<span class='no'>rcv</span>$<span class='no'>instance</span> <span class='co'># table</span></div><div class='output co'>#&gt; $test
#&gt; $test[[1]]
#&gt;  [1]   1  28  37  56  58  70 103 105 119 127 142 186 196 208 258 295 307 350 358
#&gt; [20] 378 411 473 485
#&gt; 
#&gt; $test[[2]]
#&gt;  [1]  24  30  36  73 129 153 164 165 173 180 216 231 233 264 268 297 344 348 349
#&gt; [20] 362 398 408 412 448
#&gt; 
#&gt; $test[[3]]
#&gt;  [1]  26  43  63  82  94 113 116 167 185 241 288 369 390 402 414 421 423 428 470
#&gt; [20] 476
#&gt; 
#&gt; $test[[4]]
#&gt;  [1]   3  16  33 109 111 115 146 151 156 158 159 175 252 299 321 382 446 456
#&gt; 
#&gt; $test[[5]]
#&gt;  [1]   2  13  18  41  97 143 174 229 248 249 278 296 343 379 384 441
#&gt; 
#&gt; 
#&gt; $train
#&gt; $train[[1]]
#&gt;  [1]   7  12  23  27  42  47  50  67  71  74  86  93  98 110 125 135 136 141 155
#&gt; [20] 157 160 162 169 178 181 200 203 204 213 220 223 228 234 240 243 245 247 261
#&gt; [39] 262 265 267 275 277 279 285 286 317 328 329 332 335 340 346 351 353 360 365
#&gt; [58] 371 374 375 381 385 389 392 393 406 439 442 445 447 452 453 454 462 467 471
#&gt; [77] 480 482 483 493 497
#&gt; 
#&gt; $train[[2]]
#&gt;  [1]   5  19  22  31  38  49  57  62  68  75  79  80  85  87  88  99 101 108 114
#&gt; [20] 118 121 124 130 144 152 154 177 182 190 198 202 212 217 221 225 236 237 242
#&gt; [39] 257 259 263 266 270 281 282 284 290 293 302 303 311 318 323 330 336 338 341
#&gt; [58] 342 359 368 370 391 396 399 400 403 404 407 417 418 427 436 457 460 465 466
#&gt; [77] 477 488 498
#&gt; 
#&gt; $train[[3]]
#&gt;  [1]   9  20  21  32  39  44  45  46  53  55  60  61  66  92 100 104 126 132 133
#&gt; [20] 140 147 149 150 161 163 168 170 187 189 191 195 201 214 218 219 224 227 235
#&gt; [39] 238 244 246 251 253 254 274 280 283 287 289 292 298 310 313 322 327 347 352
#&gt; [58] 367 373 376 377 386 387 394 395 409 416 430 433 444 449 450 459 472 474 475
#&gt; [77] 479 491 495
#&gt; 
#&gt; $train[[4]]
#&gt;  [1]   4   6  10  11  15  29  34  35  40  54  59  64  65  69  72  78  84  90  96
#&gt; [20] 123 128 131 137 145 166 183 192 193 197 199 210 211 232 239 250 255 256 260
#&gt; [39] 269 271 272 276 294 300 301 305 306 309 312 316 320 333 337 357 361 363 364
#&gt; [58] 366 383 397 405 410 413 419 420 424 426 429 432 435 438 458 463 464 486 487
#&gt; [77] 499 500
#&gt; 
#&gt; $train[[5]]
#&gt;  [1]   8  14  17  25  48  51  52  76  77  81  83  89  91  95 102 106 107 112 117
#&gt; [20] 120 122 134 138 139 148 171 172 176 179 184 188 194 205 206 207 209 215 222
#&gt; [39] 226 230 273 291 304 308 314 315 319 324 325 326 331 334 339 345 354 355 356
#&gt; [58] 372 380 388 401 415 422 425 431 434 437 440 443 451 455 461 468 469 478 481
#&gt; [77] 484 489 490 492 494 496
#&gt; 
#&gt; </div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://pat-s.me'>Patrick Schratz</a>, Marc Becker.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


