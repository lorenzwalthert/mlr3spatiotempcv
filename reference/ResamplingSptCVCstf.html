<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Create Spatio-Temporal Folds Using Predefined Groups — ResamplingSptCVCstf • mlr3spatiotempcv</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/journal/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/all.min.css" integrity="sha256-PbSmjxuVAzJ6FPvNYsrXygfGhNJYyZ2GktDbkMBqQZg=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/v4-shims.min.css" integrity="sha256-A6jcAdwFD48VMjlI3GDxUd+eCQa7/KWy6G9oe/ovaPA=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<link href="../extra.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Create Spatio-Temporal Folds Using Predefined Groups — ResamplingSptCVCstf" />
<meta property="og:description" content="Implementation of CAST::CreateSpaceTimeFolds()." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a href="https://mlr-org.com"><img src="https://raw.githubusercontent.com/mlr-org/mlr3/master/man/figures/logo.png" id="hexlogo" alt="mlr-org" /></a>
        <a class="navbar-brand" href="../index.html">mlr3spatiotempcv <small>v0.0.0.9011</small></a>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="../reference/index.html">
    <span class="fa fa fa fa-file-alt"></span>
     
    Reference
  </a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<li>
  <a href="https://mlr3book.mlr-org.com">
    <span class="fa fa fa fa-link"></span>
     
    mlr3book
  </a>
</li>
<li>
  <a href="../articles/mlr3spatiotempcv.html">Get started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/spatiotemp-viz.html">Spatiotemporal Visualization</a>
    </li>
  </ul>
</li>
        <li>
  <a href="https://github.com/mlr-org/mlr3spatiotempcv/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://lmmisld-lmu-stats-slds.srv.mwn.de/mlr_invite/">
    <span class="fa fa fa fa-comments"></span>
     
  </a>
</li>
<li>
  <a href="https://stackoverflow.com/questions/tagged/mlr3">
    <span class="fab fa fab fa-stack-overflow"></span>
     
  </a>
</li>
<li>
  <a href="https://mlr-org.com/">
    <span class="fa fa-rss"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create Spatio-Temporal Folds Using Predefined Groups</h1>
    <small class="dont-index">Source: <a href='https://github.com/mlr-org/mlr3spatiotempcv/blob/master/R/ResamplingSptCVCstf.R'><code>R/ResamplingSptCVCstf.R</code></a></small>
    <div class="hidden name"><code>ResamplingSptCVCstf.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Implementation of <code>CAST::CreateSpaceTimeFolds()</code>.</p>
    </div>



    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Using "class" is helpful in the case that data are clustered in space
and are categorical. E.g This is the case for land cover classifications when
training data come as training polygons. In this case the data should be split in a way
that entire polygons are held back (spacevar="polygonID") but at the same time the distribution of classes
should be similar in each fold (class="LUC").</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Meyer H, Reudenbach C, Hengl T, Katurji M, Nauss T (2018).
&#8220;Improving performance of spatio-temporal machine learning models using forward feature selection and target-oriented validation.&#8221;
<em>Environmental Modelling \&amp; Software</em>, <b>101</b>, 1--9.
doi: <a href='https://doi.org/10.1016/j.envsoft.2017.12.001'>10.1016/j.envsoft.2017.12.001</a>
, <a href='https://doi.org/10.1016%2Fj.envsoft.2017.12.001'>https://doi.org/10.1016%2Fj.envsoft.2017.12.001</a>.</p>
    <h2 class="hasAnchor" id="super-class"><a class="anchor" href="#super-class"></a>Super class</h2>

    <p><code><a href='https://mlr3.mlr-org.com/reference/Resampling.html'>mlr3::Resampling</a></code> -&gt; <code>ResamplingSptCVCstf</code></p>
    <h2 class="hasAnchor" id="active-bindings"><a class="anchor" href="#active-bindings"></a>Active bindings</h2>

    <p><div class="r6-active-bindings"></p><dl>
<dt><code>iters</code></dt><dd><p><code><a href='https://rdrr.io/r/base/integer.html'>integer(1)</a></code><br />
Returns the number of resampling iterations, depending on the
values stored in the <code>param_set</code>.</p></dd>

</dl><p></div></p>
    <h2 class="hasAnchor" id="methods"><a class="anchor" href="#methods"></a>Methods</h2>

    
<h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Public methods</h3>

<ul>
<li><p><a href='#method-new'><code>ResamplingSptCVCstf$new()</code></a></p></li>
<li><p><a href='#method-folds'><code>ResamplingSptCVCstf$folds()</code></a></p></li>
<li><p><a href='#method-repeats'><code>ResamplingSptCVCstf$repeats()</code></a></p></li>
<li><p><a href='#method-instantiate'><code>ResamplingSptCVCstf$instantiate()</code></a></p></li>
<li><p><a href='#method-clone'><code>ResamplingSptCVCstf$clone()</code></a></p></li>
</ul>
<p><details open ><summary>Inherited methods</summary>
<ul>
<li><p><span class="pkg-link" data-pkg="mlr3" data-topic="Resampling" data-id="format"><a href='../../mlr3/html/Resampling.html#method-format'><code>mlr3::Resampling$format()</code></a></span></p></li>
<li><p><span class="pkg-link" data-pkg="mlr3" data-topic="Resampling" data-id="help"><a href='../../mlr3/html/Resampling.html#method-help'><code>mlr3::Resampling$help()</code></a></span></p></li>
<li><p><span class="pkg-link" data-pkg="mlr3" data-topic="Resampling" data-id="print"><a href='../../mlr3/html/Resampling.html#method-print'><code>mlr3::Resampling$print()</code></a></span></p></li>
<li><p><span class="pkg-link" data-pkg="mlr3" data-topic="Resampling" data-id="test_set"><a href='../../mlr3/html/Resampling.html#method-test_set'><code>mlr3::Resampling$test_set()</code></a></span></p></li>
<li><p><span class="pkg-link" data-pkg="mlr3" data-topic="Resampling" data-id="train_set"><a href='../../mlr3/html/Resampling.html#method-train_set'><code>mlr3::Resampling$train_set()</code></a></span></p></li>
</ul>
</details>

<hr>
<a id="method-new"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>new()</code></h3>
<p>Create a "Spacetime Folds" resampling instance.</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>ResamplingSptCVCstf</span><span class='op'>$</span><span class='fu'>new</span><span class='op'>(</span>id <span class='op'>=</span> <span class='st'>"sptcv_cstf"</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>id</code></dt><dd><p><code><a href='https://rdrr.io/r/base/character.html'>character(1)</a></code><br />
Identifier for the resampling strategy.</p></dd>

</dl><p></div></p>
<p><hr>
<a id="method-folds"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>folds()</code></h3>
<p>Translates iteration numbers to fold number.</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>ResamplingSptCVCstf</span><span class='op'>$</span><span class='fu'>folds</span><span class='op'>(</span><span class='va'>iters</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>iters</code></dt><dd><p><code><a href='https://rdrr.io/r/base/integer.html'>integer()</a></code><br />
Iteration number.</p></dd>

</dl><p></div></p>
<p><hr>
<a id="method-repeats"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>repeats()</code></h3>
<p>Translates iteration numbers to repetition number.</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>ResamplingSptCVCstf</span><span class='op'>$</span><span class='fu'>repeats</span><span class='op'>(</span><span class='va'>iters</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>iters</code></dt><dd><p><code><a href='https://rdrr.io/r/base/integer.html'>integer()</a></code><br />
Iteration number.</p></dd>

</dl><p></div></p>
<p><hr>
<a id="method-instantiate"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>instantiate()</code></h3>
<p>Materializes fixed training and test splits for a given task.</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>ResamplingSptCVCstf</span><span class='op'>$</span><span class='fu'>instantiate</span><span class='op'>(</span>
  <span class='va'>task</span>,
  space_var <span class='op'>=</span> <span class='cn'>NULL</span>,
  time_var <span class='op'>=</span> <span class='cn'>NULL</span>,
  class <span class='op'>=</span> <span class='cn'>NULL</span>
<span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>task</code></dt><dd><p><a href='https://mlr3.mlr-org.com/reference/Task.html'>Task</a><br />
A task to instantiate.</p></dd>

<dt><code>space_var</code></dt><dd><p><code>[character]</code><br />
Column name identifying the spatial units.</p></dd>

<dt><code>time_var</code></dt><dd><p><code>[character]</code><br />
Column name identifying the temporal units.</p></dd>

<dt><code>class</code></dt><dd><p><code>[character]</code><br />
Column name identifying a class unit (e.g. land cover).</p></dd>

</dl><p></div></p>
<p><hr>
<a id="method-clone"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>clone()</code></h3>
<p>The objects of this class are cloneable with this method.</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>ResamplingSptCVCstf</span><span class='op'>$</span><span class='fu'>clone</span><span class='op'>(</span>deep <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p></dd>

</dl><p></div></p>



    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://mlr3.mlr-org.com'>mlr3</a></span><span class='op'>)</span>
<span class='va'>task</span> <span class='op'>=</span> <span class='fu'><a href='https://mlr3.mlr-org.com/reference/mlr_sugar.html'>tsk</a></span><span class='op'>(</span><span class='st'>"cookfarm"</span><span class='op'>)</span>

<span class='co'># Instantiate Resampling</span>
<span class='va'>rcv</span> <span class='op'>=</span> <span class='fu'><a href='https://mlr3.mlr-org.com/reference/mlr_sugar.html'>rsmp</a></span><span class='op'>(</span><span class='st'>"sptcv_cstf"</span>, folds <span class='op'>=</span> <span class='fl'>5</span><span class='op'>)</span>
<span class='va'>rcv</span><span class='op'>$</span><span class='fu'>instantiate</span><span class='op'>(</span><span class='va'>task</span>, time_var <span class='op'>=</span> <span class='st'>"Date"</span>, space_var <span class='op'>=</span> <span class='st'>"SOURCEID"</span><span class='op'>)</span>

<span class='co'># Individual sets:</span>
<span class='va'>rcv</span><span class='op'>$</span><span class='fu'>train_set</span><span class='op'>(</span><span class='fl'>1</span><span class='op'>)</span>
</div><div class='output co'>#&gt;  [1]   1   3  11  16  20  21  25  31  32  33  34  53  55  56  59  76  92 116 149
#&gt; [20] 155 156 168 173 174 178 179 192 200 210 221 236 237 239 240 242 256 264 270
#&gt; [39] 274 287 288 301 302 304 309 314 316 317 333 338 340 342 351 353 355 357 364
#&gt; [58] 389 395 396 403 406 409 411 413 417 420 421 424 430 431 434 445 450 453 454
#&gt; [77] 456 469 475 479 485 489 490</div><div class='input'><span class='va'>rcv</span><span class='op'>$</span><span class='fu'>test_set</span><span class='op'>(</span><span class='fl'>1</span><span class='op'>)</span>
</div><div class='output co'>#&gt;  [1]  82 117 122 134 139 140 160 164 171 203 222 223 228 253 415 429</div><div class='input'><span class='co'># check that no obs are in both sets</span>
<span class='fu'><a href='https://rdrr.io/r/base/sets.html'>intersect</a></span><span class='op'>(</span><span class='va'>rcv</span><span class='op'>$</span><span class='fu'>train_set</span><span class='op'>(</span><span class='fl'>1</span><span class='op'>)</span>, <span class='va'>rcv</span><span class='op'>$</span><span class='fu'>test_set</span><span class='op'>(</span><span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span> <span class='co'># good!</span>
</div><div class='output co'>#&gt; integer(0)</div><div class='input'>
<span class='co'># Internal storage:</span>
<span class='va'>rcv</span><span class='op'>$</span><span class='va'>instance</span> <span class='co'># table</span>
</div><div class='output co'>#&gt; $test
#&gt; $test[[1]]
#&gt;  [1]  82 117 122 134 139 140 160 164 171 203 222 223 228 253 415 429
#&gt; 
#&gt; $test[[2]]
#&gt;  [1]  19  30  79 109 130 151 167 209 261 319 365 387 394 462 473
#&gt; 
#&gt; $test[[3]]
#&gt;  [1]  63  64 125 163 169 205 207 225 249 298 318 343 366 370 412 426 448 460
#&gt; 
#&gt; $test[[4]]
#&gt;  [1]   2  42  48  87 110 114 127 142 147 170 181 219 230 268 289 311 376 378 379
#&gt; [20] 384 386 392 443 481 484
#&gt; 
#&gt; $test[[5]]
#&gt;  [1]   4  67  86  93 187 189 198 215 320 323 332 347 358 361 383 400 432 449 459
#&gt; 
#&gt; 
#&gt; $train
#&gt; $train[[1]]
#&gt;  [1]   1   3  11  16  20  21  25  31  32  33  34  53  55  56  59  76  92 116 149
#&gt; [20] 155 156 168 173 174 178 179 192 200 210 221 236 237 239 240 242 256 264 270
#&gt; [39] 274 287 288 301 302 304 309 314 316 317 333 338 340 342 351 353 355 357 364
#&gt; [58] 389 395 396 403 406 409 411 413 417 420 421 424 430 431 434 445 450 453 454
#&gt; [77] 456 469 475 479 485 489 490
#&gt; 
#&gt; $train[[2]]
#&gt;  [1]  13  17  22  23  41  44  45  46  49  51  60  62  74  77  90  94  96 103 104
#&gt; [20] 112 119 123 132 133 135 137 143 148 165 184 188 191 194 195 202 208 216 220
#&gt; [39] 227 232 238 243 246 252 254 263 266 278 279 284 290 292 294 308 310 321 324
#&gt; [58] 334 336 348 349 359 372 385 393 397 398 399 401 416 423 425 438 444 447 452
#&gt; [77] 458 463 466 468 474 480 482 487 493 497 498
#&gt; 
#&gt; $train[[3]]
#&gt;  [1]   5  24  36  37  38  52  57  58  61  68  69  72  73  85  89  95  99 108 111
#&gt; [20] 121 124 128 129 131 136 138 150 152 154 157 161 162 172 175 177 185 201 206
#&gt; [39] 211 213 217 224 226 229 233 235 248 273 276 277 283 285 297 305 307 312 313
#&gt; [58] 326 341 346 368 371 374 380 382 388 390 402 405 408 419 437 467 470 476 478
#&gt; [77] 483 491 494
#&gt; 
#&gt; $train[[4]]
#&gt;  [1]   6   7   9  10  14  28  39  47  65  75  78  80  81  83  88  97 101 102 106
#&gt; [20] 107 141 144 153 159 166 180 186 190 199 212 234 241 244 251 258 259 271 272
#&gt; [39] 280 281 282 286 296 299 303 306 315 322 327 328 329 337 344 345 354 356 362
#&gt; [58] 363 367 369 373 377 391 407 410 428 433 451 457 465 471 472 488 492
#&gt; 
#&gt; $train[[5]]
#&gt;  [1]   8  12  15  18  26  27  29  35  40  43  50  54  66  70  71  84  91  98 100
#&gt; [20] 105 113 115 118 120 126 145 146 158 176 182 183 193 196 197 204 214 218 231
#&gt; [39] 245 247 250 255 257 260 262 265 267 269 275 291 293 295 300 325 330 331 335
#&gt; [58] 339 350 352 360 375 381 404 414 418 422 427 435 436 439 440 441 442 446 455
#&gt; [77] 461 464 477 486 495 496 499 500
#&gt; 
#&gt; </div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://pat-s.me'>Patrick Schratz</a>, Marc Becker.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


