<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>"Leave-location-and-time-out" resampling. — ResamplingSptCVCstf • mlr3spatiotempcv</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/journal/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/all.min.css" integrity="sha256-PbSmjxuVAzJ6FPvNYsrXygfGhNJYyZ2GktDbkMBqQZg=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/v4-shims.min.css" integrity="sha256-A6jcAdwFD48VMjlI3GDxUd+eCQa7/KWy6G9oe/ovaPA=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<link href="../extra.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content=""Leave-location-and-time-out" resampling. — ResamplingSptCVCstf" />
<meta property="og:description" content="Implementation of CAST::CreateSpaceTimeFolds()." />
<meta name="twitter:card" content="summary" />


<meta name="robots" content="noindex">

<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a href="https://mlr-org.com"><img src="https://raw.githubusercontent.com/mlr-org/mlr3/master/man/figures/logo.png" id="hexlogo" alt="mlr-org" /></a>
        <a class="navbar-brand" href="../index.html">mlr3spatiotempcv <small>v0.3.0.9000</small></a>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="../reference/index.html">
    <span class="fa fa fa fa-file-alt"></span>
     
    Reference
  </a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<li>
  <a href="https://mlr3book.mlr-org.com">
    <span class="fa fa fa fa-link"></span>
     
    mlr3book
  </a>
</li>
<li>
  <a href="../articles/mlr3spatiotempcv.html">Get started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/spatiotemp-viz.html">Spatiotemporal Visualization</a>
    </li>
  </ul>
</li>
        <li>
  <a href="https://github.com/mlr-org/mlr3spatiotempcv/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://lmmisld-lmu-stats-slds.srv.mwn.de/mlr_invite/">
    <span class="fa fa fa fa-comments"></span>
     
  </a>
</li>
<li>
  <a href="https://stackoverflow.com/questions/tagged/mlr3">
    <span class="fab fa-stack-overflow"></span>
     
  </a>
</li>
<li>
  <a href="https://mlr-org.com/">
    <span class="fas fa-rss"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>"Leave-location-and-time-out" resampling.</h1>
    <small class="dont-index">Source: <a href='https://github.com/mlr-org/mlr3spatiotempcv/blob/master/R/ResamplingSptCVCstf.R'><code>R/ResamplingSptCVCstf.R</code></a></small>
    <div class="hidden name"><code>ResamplingSptCVCstf.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Implementation of <code>CAST::CreateSpaceTimeFolds()</code>.</p>
    </div>



    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Using "class" is helpful in the case that data are clustered in space
and are categorical. E.g This is the case for land cover classifications when
training data come as training polygons. In this case the data should be split in a way
that entire polygons are held back (spacevar="polygonID") but at the same time the distribution of classes
should be similar in each fold (class="LUC").</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Meyer H, Reudenbach C, Hengl T, Katurji M, Nauss T (2018).
&#8220;Improving performance of spatio-temporal machine learning models using forward feature selection and target-oriented validation.&#8221;
<em>Environmental Modelling &amp; Software</em>, <b>101</b>, 1--9.
doi: <a href='https://doi.org/10.1016/j.envsoft.2017.12.001'>10.1016/j.envsoft.2017.12.001</a>
.</p>
    <h2 class="hasAnchor" id="super-class"><a class="anchor" href="#super-class"></a>Super class</h2>

    <p><code><a href='https://mlr3.mlr-org.com/reference/Resampling.html'>mlr3::Resampling</a></code> -&gt; <code>ResamplingSptCVCstf</code></p>
    <h2 class="hasAnchor" id="public-fields"><a class="anchor" href="#public-fields"></a>Public fields</h2>

    <p><div class="r6-fields"></p><dl>
<dt><code>space_var</code></dt><dd><p><code><a href='https://rdrr.io/r/base/character.html'>character(1)</a></code><br />
Column name identifying the spatial units.</p></dd>

<dt><code>time_var</code></dt><dd><p><code><a href='https://rdrr.io/r/base/character.html'>character(1)</a></code><br />
Column name identifying the temporal units.</p></dd>

<dt><code>class</code></dt><dd><p><code><a href='https://rdrr.io/r/base/character.html'>character(1)</a></code><br />
Column name identifying a class unit (e.g. land cover).</p></dd>

</dl><p></div></p>
    <h2 class="hasAnchor" id="active-bindings"><a class="anchor" href="#active-bindings"></a>Active bindings</h2>

    <p><div class="r6-active-bindings"></p><dl>
<dt><code>iters</code></dt><dd><p><code><a href='https://rdrr.io/r/base/integer.html'>integer(1)</a></code><br />
Returns the number of resampling iterations, depending on the
values stored in the <code>param_set</code>.</p></dd>

</dl><p></div></p>
    <h2 class="hasAnchor" id="methods"><a class="anchor" href="#methods"></a>Methods</h2>

    
<h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Public methods</h3>

<ul>
<li><p><a href='#method-new'><code>ResamplingSptCVCstf$new()</code></a></p></li>
<li><p><a href='#method-instantiate'><code>ResamplingSptCVCstf$instantiate()</code></a></p></li>
<li><p><a href='#method-clone'><code>ResamplingSptCVCstf$clone()</code></a></p></li>
</ul>
<p><details open ><summary>Inherited methods</summary>
<ul>
<li><p><span class="pkg-link" data-pkg="mlr3" data-topic="Resampling" data-id="format"><a href='../../mlr3/html/Resampling.html#method-format'><code>mlr3::Resampling$format()</code></a></span></p></li>
<li><p><span class="pkg-link" data-pkg="mlr3" data-topic="Resampling" data-id="help"><a href='../../mlr3/html/Resampling.html#method-help'><code>mlr3::Resampling$help()</code></a></span></p></li>
<li><p><span class="pkg-link" data-pkg="mlr3" data-topic="Resampling" data-id="print"><a href='../../mlr3/html/Resampling.html#method-print'><code>mlr3::Resampling$print()</code></a></span></p></li>
<li><p><span class="pkg-link" data-pkg="mlr3" data-topic="Resampling" data-id="test_set"><a href='../../mlr3/html/Resampling.html#method-test_set'><code>mlr3::Resampling$test_set()</code></a></span></p></li>
<li><p><span class="pkg-link" data-pkg="mlr3" data-topic="Resampling" data-id="train_set"><a href='../../mlr3/html/Resampling.html#method-train_set'><code>mlr3::Resampling$train_set()</code></a></span></p></li>
</ul>
</details>

<hr>
<a id="method-new"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>new()</code></h3>
<p>Create a "Spacetime Folds" resampling instance.</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>ResamplingSptCVCstf</span><span class='op'>$</span><span class='fu'>new</span><span class='op'>(</span>
  id <span class='op'>=</span> <span class='st'>"sptcv_cstf"</span>,
  space_var <span class='op'>=</span> <span class='cn'>NULL</span>,
  time_var <span class='op'>=</span> <span class='cn'>NULL</span>,
  class <span class='op'>=</span> <span class='cn'>NULL</span>
<span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>id</code></dt><dd><p><code><a href='https://rdrr.io/r/base/character.html'>character(1)</a></code><br />
Identifier for the resampling strategy.</p></dd>

<dt><code>space_var</code></dt><dd><p><code><a href='https://rdrr.io/r/base/character.html'>character(1)</a></code><br />
Column name identifying the spatial units.</p></dd>

<dt><code>time_var</code></dt><dd><p><code><a href='https://rdrr.io/r/base/character.html'>character(1)</a></code><br />
Column name identifying the temporal units.</p></dd>

<dt><code>class</code></dt><dd><p><code><a href='https://rdrr.io/r/base/character.html'>character(1)</a></code><br />
Column name identifying a class unit (e.g. land cover).</p></dd>

</dl><p></div></p>
<p><hr>
<a id="method-instantiate"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>instantiate()</code></h3>
<p>Materializes fixed training and test splits for a given task.</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>ResamplingSptCVCstf</span><span class='op'>$</span><span class='fu'>instantiate</span><span class='op'>(</span><span class='va'>task</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>task</code></dt><dd><p><a href='https://mlr3.mlr-org.com/reference/Task.html'>Task</a><br />
A task to instantiate.</p></dd>

<dt><code>space_var</code></dt><dd><p><code>[character]</code><br />
Column name identifying the spatial units.</p></dd>

<dt><code>time_var</code></dt><dd><p><code>[character]</code><br />
Column name identifying the temporal units.</p></dd>

<dt><code>class</code></dt><dd><p><code>[character]</code><br />
Column name identifying a class unit (e.g. land cover).</p></dd>

</dl><p></div></p>
<p><hr>
<a id="method-clone"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>clone()</code></h3>
<p>The objects of this class are cloneable with this method.</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>ResamplingSptCVCstf</span><span class='op'>$</span><span class='fu'>clone</span><span class='op'>(</span>deep <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p></dd>

</dl><p></div></p>



    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://mlr3.mlr-org.com'>mlr3</a></span><span class='op'>)</span>
<span class='va'>task</span> <span class='op'>=</span> <span class='fu'><a href='https://mlr3.mlr-org.com/reference/mlr_sugar.html'>tsk</a></span><span class='op'>(</span><span class='st'>"cookfarm"</span><span class='op'>)</span>

<span class='co'># Instantiate Resampling</span>
<span class='va'>rcv</span> <span class='op'>=</span> <span class='fu'><a href='https://mlr3.mlr-org.com/reference/mlr_sugar.html'>rsmp</a></span><span class='op'>(</span><span class='st'>"sptcv_cstf"</span>,
  folds <span class='op'>=</span> <span class='fl'>5</span>,
  time_var <span class='op'>=</span> <span class='st'>"Date"</span>, space_var <span class='op'>=</span> <span class='st'>"SOURCEID"</span><span class='op'>)</span>
<span class='va'>rcv</span><span class='op'>$</span><span class='fu'>instantiate</span><span class='op'>(</span><span class='va'>task</span><span class='op'>)</span>

<span class='co'># Individual sets:</span>
<span class='va'>rcv</span><span class='op'>$</span><span class='fu'>train_set</span><span class='op'>(</span><span class='fl'>1</span><span class='op'>)</span>
</div><div class='output co'>#&gt;  [1]  10  12  23  24  29  41  42  47  53  57  64  66  69  74  85  87  89  94  97
#&gt; [20]  99 105 113 114 118 131 134 138 145 153 157 164 165 174 178 191 198 218 229
#&gt; [39] 241 242 243 250 257 268 274 283 289 290 296 298 305 317 339 341 349 350 359
#&gt; [58] 368 369 371 387 398 401 414 425 428 439 440 448 450 452 457 473 481 485 489
#&gt; [77] 495</div><div class='input'><span class='va'>rcv</span><span class='op'>$</span><span class='fu'>test_set</span><span class='op'>(</span><span class='fl'>1</span><span class='op'>)</span>
</div><div class='output co'>#&gt;  [1]  17  78  79  83  93 162 170 171 172 213 216 255 293 374 377 392 419 453 454
#&gt; [20] 484</div><div class='input'><span class='co'># check that no obs are in both sets</span>
<span class='fu'><a href='https://rdrr.io/r/base/sets.html'>intersect</a></span><span class='op'>(</span><span class='va'>rcv</span><span class='op'>$</span><span class='fu'>train_set</span><span class='op'>(</span><span class='fl'>1</span><span class='op'>)</span>, <span class='va'>rcv</span><span class='op'>$</span><span class='fu'>test_set</span><span class='op'>(</span><span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span> <span class='co'># good!</span>
</div><div class='output co'>#&gt; integer(0)</div><div class='input'>
<span class='co'># Internal storage:</span>
<span class='va'>rcv</span><span class='op'>$</span><span class='va'>instance</span> <span class='co'># table</span>
</div><div class='output co'>#&gt; $test
#&gt; $test[[1]]
#&gt;  [1]  17  78  79  83  93 162 170 171 172 213 216 255 293 374 377 392 419 453 454
#&gt; [20] 484
#&gt; 
#&gt; $test[[2]]
#&gt;  [1]  13  14  49  67  76  90 173 207 217 236 248 271 320 329 409 411 413 417
#&gt; 
#&gt; $test[[3]]
#&gt;  [1]  50  60  62  96 102 116 181 185 201 210 232 238 240 264 282 309 315 344 358
#&gt; [20] 361 363 373 376 382 424 464
#&gt; 
#&gt; $test[[4]]
#&gt;  [1]  30  35  40  98 107 123 159 160 179 199 202 204 235 280 302 346 372 379 391
#&gt; [20] 394 442 449 471 480 488 493
#&gt; 
#&gt; $test[[5]]
#&gt;  [1]   6  39  56  71  72 112 122 146 152 187 194 266 286 310 333 343 366 396 405
#&gt; [20] 416 451 455 461
#&gt; 
#&gt; 
#&gt; $train
#&gt; $train[[1]]
#&gt;  [1]  10  12  23  24  29  41  42  47  53  57  64  66  69  74  85  87  89  94  97
#&gt; [20]  99 105 113 114 118 131 134 138 145 153 157 164 165 174 178 191 198 218 229
#&gt; [39] 241 242 243 250 257 268 274 283 289 290 296 298 305 317 339 341 349 350 359
#&gt; [58] 368 369 371 387 398 401 414 425 428 439 440 448 450 452 457 473 481 485 489
#&gt; [77] 495
#&gt; 
#&gt; $train[[2]]
#&gt;  [1]   3   8  16  25  34  36  43  75  80  88  92 100 106 110 115 121 127 129 135
#&gt; [20] 137 140 141 143 148 150 156 161 175 180 188 195 196 211 220 223 224 225 227
#&gt; [39] 230 233 239 245 260 263 270 273 279 288 292 295 300 301 303 307 314 316 319
#&gt; [58] 323 324 325 328 335 336 351 354 356 375 381 383 386 397 399 403 404 407 412
#&gt; [77] 421 422 430 437 441 447 456 470 474 482 486 494
#&gt; 
#&gt; $train[[3]]
#&gt;  [1]   2   5   9  15  18  19  22  27  32  38  70  73  77  82  84  86 108 125 130
#&gt; [20] 142 144 149 151 154 155 167 168 169 182 183 186 189 203 205 208 209 212 226
#&gt; [39] 237 246 258 259 261 278 291 331 342 347 348 355 364 370 389 390 393 395 402
#&gt; [58] 444 445 459 460 468 472 478 479 483 497 499
#&gt; 
#&gt; $train[[4]]
#&gt;  [1]  20  21  26  28  33  37  44  45  52  54  58  59  61  91  95 109 111 119 124
#&gt; [20] 128 136 139 147 158 163 166 177 200 214 221 228 231 244 247 252 253 254 262
#&gt; [39] 275 276 277 285 299 304 306 311 313 322 340 352 353 357 362 367 378 380 384
#&gt; [58] 385 388 400 408 410 415 426 427 429 431 433 436 443 465 469 477 491 492 496
#&gt; [77] 500
#&gt; 
#&gt; $train[[5]]
#&gt;  [1]   1   4   7  11  31  46  48  51  55  63  65  68  81 101 103 104 117 120 126
#&gt; [20] 132 133 176 184 190 192 193 197 206 215 219 222 234 249 251 256 265 267 269
#&gt; [39] 272 281 284 287 294 297 308 312 318 321 326 327 330 332 334 337 338 345 360
#&gt; [58] 365 406 418 420 423 432 434 435 438 446 458 462 463 466 467 475 476 487 490
#&gt; [77] 498
#&gt; 
#&gt; </div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://pat-s.me'>Patrick Schratz</a>, Marc Becker.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


